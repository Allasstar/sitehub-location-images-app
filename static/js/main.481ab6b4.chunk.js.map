{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["token","projectId","addUrls","observer","Observer","status","locations","locationImages","locationId","App","class","TopPanel","SelectPanel","AddPanel","statusLink","path","height","text","placeholder","onChange","enterProjectId","enterToken","icon","enabled","onClick","loadLocations","binding","BindingTwoWay","link","useState","setLocations","on","setLocationImages","hidden","scrollable","value","map","key","id","title","width","loadLocationImages","imageURL","split","reverse","window","open","deleteLocationImages","changeLocationImageArrayInput","type","postLocationImages","console","log","locationImagesUrl","set","myHeaders","Headers","append","fetch","method","headers","then","response","result","JSON","parse","length","catch","error","sort","a","b","limg","undefined","push","raw","stringify","body","get","i","foundIndex","findIndex","e","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.481ab6b4.chunk.js","sourcesContent":["import './App.css';\n\nimport { Container, Button, Label, TextInput, Divider, ArrayInput } from '@playcanvas/pcui/pcui-react.js';\nimport { BindingTwoWay, Observer } from '@playcanvas/pcui/pcui-binding.js';\nimport React, { useState } from 'react';\n\nconst observer = new Observer({ status: 'Status: ok', locations: {}, locationImages: {} });\nlet token;\nlet projectId;\nlet locationId = -1;\nlet addUrls;\n\nfunction App() {\n\n  return (\n    <Container class={'bgc1'}>\n      <TopPanel />\n      <Divider />\n      <SelectPanel />\n      <Divider />\n      <AddPanel />\n    </Container>\n  );\n}\n\nexport default App;\n\n// UI Panels\nfunction TopPanel() {\n  const statusLink = { observer, path: 'status' };\n  return (\n    <Container height={40}>\n      <Label text='SiteHub' />\n      <TextInput placeholder='enter project id' onChange={enterProjectId}/>\n      <TextInput placeholder='enter lambda token' onChange={enterToken}/>\n      <Button text=\"Find Location\" icon='E129' enabled={true} onClick={loadLocations} />\n      <Label binding={new BindingTwoWay()} link={statusLink} />\n    </Container>\n  );\n}\n\nfunction SelectPanel() {\n  const [ locations, setLocations ] = useState({});\n  observer.on('locations:set', setLocations);\n\n  const [ locationImages, setLocationImages ] = useState({});\n  observer.on('locationImages:set', setLocationImages);\n\n  return (\n  <Container class={'col2'}>\n    <Label text='Locations' />\n    <Container class={'bgc2'} hidden={false} height={250} scrollable={true}>\n      {\n        locations?.value?.map(key => {\n          return [\n            <Button text={`Select > id: ${key.id}  title: ${key.title}`} icon='E131' width={220} enabled={true} onClick={() => loadLocationImages(key)} />\n          ];\n        })\n      }\n    </Container>\n      <Label text='Location Images' />\n      <Container class={'bgc3'} hidden={false} height={250} scrollable={true}>\n      {\n        locationImages?.value?.map(key => {\n          return [\n            <Container>\n              <Label text={`id: ${key.id} - Name: ${key.imageURL.split('/').reverse()[0]}`} />\n              <Button text=\"Open\" icon='E117' width={80} enabled={true} onClick={() => {window.open(key.imageURL)}} />\n              <Button text=\"Delete\" icon='E124' width={80} enabled={true} onClick={() => deleteLocationImages(key.id)} />\n            </Container>\n          ];\n        })\n      }\n    </Container>\n  </Container>\n  );\n}\n\nfunction AddPanel() {\n  return (\n    <Container class={'bgc4'} >\n      <Label text='Add URLs' />\n      <ArrayInput enabled={true} width={720} onChange={(value) => changeLocationImageArrayInput(value)} type=\"string\"/>\n      <Button text=\"Apply\" icon='E133' enabled={true} onClick={() => postLocationImages()} />\n    </Container>\n  );\n}\n\n// UI Events\nconst enterToken = (value) => {\n  token = value;\n  console.log('token =', token);\n};\n\nconst enterProjectId = (value) => {\n  projectId = value;\n  console.log('projectId =', projectId);\n};\n\nconst changeLocationImageArrayInput = (key) => {\n  addUrls = key;\n  console.log('changeLocationImages', addUrls);\n}\n\n// Requests\nconst locationUrl = \"https://o8n4pc42ee.execute-api.eu-north-1.amazonaws.com/dev/core/locations\";\nconst locationImagesUrl = \"https://o8n4pc42ee.execute-api.eu-north-1.amazonaws.com/dev/core/location-images\";\nconst loadLocations = () => {\n  locationId = -1;\n  observer.set('locations',{});\n  observer.set('locationImages', {});\n  observer.set('status', `Status: finding locations for project id: ${projectId}`);\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", token);\n  myHeaders.append(\"project_id\", projectId);\n  \n  var requestOptions = {\n    method: 'GET',\n    headers: myHeaders\n  };\n  \n  fetch(locationUrl, requestOptions)\n    .then(response => response.text())\n    .then(result => {\n      const value = JSON.parse(result);\n      console.log('Location count:', value?.length);\n      observer.set('status', `Status: finded [${value?.length}] locations`);\n      observer.set('locations', {value});\n    })\n    .catch(error => {\n      console.log('error', error);\n      observer.set('status', `Status: error [${error}]`);\n    });\n  console.log('loadLocations =', projectId);\n};\n\nconst loadLocationImages = (key) => {\n  locationId = -1;\n  observer.set('locationImages', {});\n  observer.set('status', `Status: loading images for location id: ${key.id}`);\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", token);\n  myHeaders.append(\"location_id\", key.id);\n  \n  var requestOptions = {\n    method: 'GET',\n    headers: myHeaders,\n  };\n  \n  fetch(locationImagesUrl, requestOptions)\n    .then(response => response.text())\n    .then(result => {\n      const value = JSON.parse(result);\n      console.log('Location count:', value?.length);\n      value?.sort((a,b) => a.id - b.id);\n      observer.set('locationImages', {value});\n      observer.set('status', `Status: loaded [${value?.length}] images for location id: ${key.id}`);\n      locationId = key.id;\n    })\n    .catch(error => {\n      console.log('error', error);\n      observer.set('status', `Status: error [${error}]`);\n    });\n};\n\nconst postLocationImages = () => {\n  \n  if (addUrls?.length === 0 || addUrls ===null) {\n    observer.set('status', `Status: need add URLs`);\n    return;\n  }\n\n  let limg = []; \n  \n  for (let a of addUrls) {\n    if (a !== '' & a !==undefined) {\n      limg.push({\n        locationId,\n        imageURL: a,\n      });\n    }\n  }\n\n  if (limg?.length === 0) {\n    observer.set('status', `Status: URL field(s) is empty`);\n    return;\n  }\n\n  if (locationId < 0) {\n    observer.set('status', `Status: need select locationId`);\n    return;\n  }\n\n  observer.set('status', `Status: start adding [${addUrls?.length}] images to locationId: [${locationId}]`);\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", token);\n  myHeaders.append(\"Content-Type\", \"application/json\");\n\n  var raw = JSON.stringify(limg);\n  \n  var requestOptions = {\n    method: 'POST',\n    headers: myHeaders,\n    body: raw,\n  };\n  \n  fetch(locationImagesUrl, requestOptions)\n    .then(response => response.text())\n    .then(result => {\n      observer.set('status', `Status: added [${addUrls?.length}] images to locationId: [${locationId}]`);\n      console.log(result);\n      result = JSON.parse(result);\n      const value = observer.get('locationImages').value;\n      for (const i of result) {\n        value.push(i)\n      }\n      value?.sort((a,b) => a.id - b.id);\n      observer.set('locationImages', {});\n      observer.set('locationImages', {value});\n    })\n    .catch(error => {\n      console.log('error', error);\n      observer.set('status', `Status: error [${error}]`);\n    });\n}\n\nconst deleteLocationImages = (key) => {\n  console.log('delete img id =', key);\n  observer.set('status', `Status: start deleting image id [${key}] in locationId: [${locationId}]`);\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.pF3q46_CLIyP_1QZPpeccbs-hC4n9YW2VMBjKrSO6Wg\");\n  myHeaders.append(\"Content-Type\", \"application/json\");\n\n  var raw = JSON.stringify([{id:key}]);\n\n  var requestOptions = {\n    method: 'DELETE',\n    headers: myHeaders,\n    body: raw,\n  };\n\n  fetch(locationImagesUrl, requestOptions)\n    .then(response => response.text())\n    .then(result => {\n      console.log(result);\n      observer.set('status', `Status: deleted image id [${key}] in locationId: [${locationId}]`);\n      const value = observer.get('locationImages').value;\n      const foundIndex = value.findIndex(e => e?.id === key);\n      delete value[foundIndex];\n      value?.sort((a,b) => a.id - b.id);\n      observer.set('locationImages', {});\n      observer.set('locationImages', {value});\n    })\n    .catch(error => {\n      console.log('error', error);\n      observer.set('status', `Status: need select locationId`);\n    });\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}